<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusTime</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <div class="navbar">
        <div class="container">
            <a href="#" class="logo">FocusTime</a>

            <nav>
                <ul class="navitemlist">
                    <li>
                        <a class="active" href="upcomingTasks.html">
                            <div class="icon"><img src="assets/upcomingtasksicon.svg" alt="Upcoming Tasks"></div>
                            <div class="navitem" data-text="Upcoming Tasks">Upcoming tasks</div>
                        </a>
                    </li>
                    <li>
                        <a href="statistics.html">
                            <div class="icon"><img src="assets/statisticsicon.svg" alt="Statistics"></div>
                            <div class="navitem" data-text="Statistics">Statistics</div>
                        </a>
                    </li>
                    <li>
                        <a href="index.html">
                            <div class="icon"><img src="assets/timericon.svg" alt="Timer Page"></div>
                            <div class="navitem" data-text="Timer Page">Homepage</div>
                        </a>
                    </li>
                    <li>
                        <a href="music.html">
                            <div class="icon"><img src="assets/musicicon.svg" alt="Music"></div>
                            <div class="navitem" data-text="Music">Music</div>
                        </a>
                    </li>
                    <li>
                        <a href="settings.html">
                            <div class="icon"><img src="assets/settingsicon.svg" alt="Settings"></div>
                            <div class="navitem" data-text="Settings">Settings</div>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <h1 id="upcoming-tasks-title">My Projects</h1>
    <div class="accordion">
        <div class="accordion-item">
            <div class="accordion-item-header active">
                  COMP 3020
            </div>
            <div class="accordion-item-body" id="table1Parent">
                <div class="accordion-item-body-content">
                  <table class="content-table" id="table1">
                      <thead>
                          <tr>
                          <th>Task</th>
                          <th>Status</th>
                          <th>Due Date</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr>
                          <td>MS1</td>
                          <td>100% Complete</td>
                          <td>Oct 8, 2021 4:00PM</td>
                          </tr>
                          <tr>
                          <td>MS2</td>
                          <td>100% Complete</td>
                          <td>Oct 22, 2021 4:00PM</td>
                          </tr>
                          <tr>
                          <td>MS3</td>
                          <td>30% Complete</td>
                          <td>Nov 26, 2021 4:00PM</td>
                          </tr>
                          <tr>
                              <td colspan="3" style="width:100%"><button class="newItem" onclick="createNewTask('table1', 'table1Parent')">+ Create new task</button></td>
                          </tr>
                      </tbody>
                  </table>
                </div>
            </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-item-header">
                ECE 4600
          </div>
          <div class="accordion-item-body" id="table2Parent">
              <div class="accordion-item-body-content">
                <table class="content-table" id="table2">
                    <thead>
                        <tr>
                        <th>Task</th>
                        <th>Status</th>
                        <th>Due Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                        <td>DR1</td>
                        <td>100% Complete</td>
                        <td>Oct 8, 2021 4:00PM</td>
                        </tr>
                        <tr>
                        <td>DR2</td>
                        <td>100% Complete</td>
                        <td>Oct 22, 2021 4:00PM</td>
                        </tr>
                        <tr>
                        <td>DR3</td>
                        <td>30% Complete</td>
                        <td>Nov 26, 2021 4:00PM</td>
                        </tr>
                        <tr>
                            <td colspan="3" style="width:100%"><button class="newItem" onclick="createNewTask('table2', 'table2Parent')">+ Create new task</button></td>
                        </tr>
                    </tbody>
                </table>
              </div>
          </div>
      </div>

      <div class="accordion-item">
          <div class="accordion-item-header">
                +Create New Project
          </div>
          <div class="accordion-item-body">
              <div class="accordion-item-body-content">
                  <form>
                      <label for="projectName">New Project Name:</label>
                      <input type="text" id="projectName" name="projectName">
                  </form>  
              </div>
          </div>
      </div>

    </div>
</body>

<script>
    const accordionItemHeaders = document.querySelectorAll(".accordion-item-header");

    accordionItemHeaders.forEach(accordionItemHeader => {
    const accordionItemBody = accordionItemHeader.nextElementSibling;
    if(accordionItemHeader.classList.contains("active")) {
        accordionItemBody.style.maxHeight = "250px";
    }

    accordionItemHeader.addEventListener("click", event => {
    accordionItemHeader.classList.toggle("active");
    const accordionItemBody = accordionItemHeader.nextElementSibling;
    if(accordionItemHeader.classList.contains("active")) {
        accordionItemBody.style.maxHeight = "250px";
    }
    else {
        accordionItemBody.style.maxHeight = 0;
    }
    
    });
    });

    function createNewTask(tableID, tableParentID) {
    // let task = prompt('What is the new task?');
    // let progress = prompt('What is the new task\'s progress?');
    // let date = prompt('When is the new task\'s due date?');

    let task = 'MS4';
    let progress = '0%';
    let date = 'Dec 8, 2021';
    let table = document.getElementById(tableID);
    let tableParent = document.getElementById(tableParentID);

    let newRow = `
                <tr>
                    <td>${task}</td>
                    <td>${progress}</td>
                    <td>${date}</td>
                </tr>`;

    table.innerHTML += newRow;
    tableParent.style.maxHeight = accordionItemBody.scrollHeight + "px";
    // let lastRow = table.rows.length;
    // lastRow.insertAdjacentHTML('beforebegin', newRow);
    }

</script>

</html>